<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SurakshaPath | Campus Safety</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1"><i class="fas fa-shield-alt"></i> SurakshaPath</span>
            <div class="d-flex align-items-center">
                <a href="login.html" class="btn btn-outline-light btn-sm me-2">Login</a>
                <span class="badge bg-success" id="connectionStatus">Online</span>
            </div>
        </div>
    </nav>

    <!-- Map Section -->
    <div id="map"></div>

    <!-- SOS Section -->
    <div class="sos-container">
        <button class="btn btn-sos" onclick="triggerSOS()">SOS</button>
    </div>

    <!-- Main Controls -->
    <div class="container mt-3">
        
        <!-- Status Messages -->
        <div class="text-center mb-3">
            <p id="locationStatus" class="text-muted small"><i class="fas fa-satellite-dish"></i> Fetching location...</p>
            <p id="recordingStatus"><i class="fas fa-microphone"></i> REC Audio Evidence...</p>
        </div>

        <!-- Timer Section -->
        <div class="card feature-card p-3 text-center" id="timerCard">
            <h5><i class="fas fa-hourglass-half"></i> Smart Travel Timer</h5>
            <div id="timerDisplay">00:00</div>
            <div id="timerControls">
                <div class="input-group mb-2">
                    <select class="form-select" id="timeSelect">
                        <option value="5">5 Mins (Hostel to Gate)</option>
                        <option value="10">10 Mins (Library to Hostel)</option>
                        <option value="15">15 Mins (Main Road to Campus)</option>
                        <option value="30">30 Mins (Home)</option>
                    </select>
                    <button class="btn btn-primary" onclick="startTimer()">Start</button>
                </div>
            </div>
            <button class="btn btn-success w-100 mt-2" id="safeBtn" style="display:none;" onclick="markSafe()">
                <i class="fas fa-check-circle"></i> I Reached Safely
            </button>
        </div>

        <!-- Trusted Auto Section -->
        <div class="card feature-card p-3">
            <h5><i class="fas fa-taxi"></i> Trusted Campus Autos</h5>
            <div id="autoList">
                <!-- Drivers injected via JS -->
            </div>
            <!-- Add Custom Driver Feature -->
            <div class="mt-3 pt-2 border-top">
                <small class="text-muted">Add New Driver:</small>
                <div class="input-group input-group-sm mt-1">
                    <input type="text" class="form-control" id="newDriverName" placeholder="Name">
                    <input type="tel" class="form-control" id="newDriverPhone" placeholder="Phone">
                    <button class="btn btn-outline-secondary" onclick="addCustomDriver()">Add</button>
                </div>
            </div>
        </div>

        <!-- Emergency Contacts Setup (Mock) -->
        <div class="card feature-card p-3">
            <h5><i class="fas fa-user-friends"></i> Emergency Contacts</h5>
            
            <label class="small text-muted">Parent/Guardian 1</label>
            <div class="input-group mb-2">
                <input type="tel" class="form-control" id="emergencyPhone1" placeholder="91XXXXXXXXXX" value="918149919375">
                <button class="btn btn-danger" onclick="callContact('emergencyPhone1')" title="Call"><i class="fas fa-phone"></i></button>
                <button class="btn btn-success" onclick="waContact('emergencyPhone1')" title="WhatsApp"><i class="fab fa-whatsapp"></i></button>
                <button class="btn btn-secondary" onclick="smsContact('emergencyPhone1')" title="SMS"><i class="fas fa-comment-alt"></i></button>
            </div>

            <label class="small text-muted">Parent/Guardian 2</label>
            <div class="input-group mb-2">
                <input type="tel" class="form-control" id="emergencyPhone2" placeholder="91XXXXXXXXXX">
                <button class="btn btn-danger" onclick="callContact('emergencyPhone2')" title="Call"><i class="fas fa-phone"></i></button>
                <button class="btn btn-success" onclick="waContact('emergencyPhone2')" title="WhatsApp"><i class="fab fa-whatsapp"></i></button>
                <button class="btn btn-secondary" onclick="smsContact('emergencyPhone2')" title="SMS"><i class="fas fa-comment-alt"></i></button>
            </div>
            
            <small class="text-muted">Format: 91XXXXXXXXXX (Include Country Code)</small>
        </div>

    </div>

    <!-- Audio Download Modal (For Hackathon Demo Evidence) -->
    <div class="modal fade" id="evidenceModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Evidence Recorded</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Audio recorded during SOS event.</p>
                    <audio id="audioPlayback" controls class="w-100"></audio>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS (Must load before Maps API to define initMap) -->
    <script src="script.js"></script>

    <!-- Google Maps API (Replace YOUR_KEY) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwletCxx5j_345VDtKQxt74iK-31DB4bc&callback=initMap" async defer></script>
</body>
</html>